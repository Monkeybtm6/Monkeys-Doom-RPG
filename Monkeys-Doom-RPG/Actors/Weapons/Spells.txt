ACTOR SPBaseSpell : Weapon
{
  tag "How?"
  +WEAPON.NOALERT
  +WEAPON.NO_AUTO_SWITCH
  +WEAPON.CHEATNOTWEAPON
  Weapon.SelectionOrder 9999
  Weapon.AmmoGive 20
  Weapon.BobSpeed 2.0
  Weapon.BobRangeX 0.90
  Weapon.BobRangeX 0.75
  Weapon.BobStyle Smooth
  Inventory.PickupSound "misc/p_pkup"
  States
  {
  Ready:
    HSPI AABCCBAA 3 A_WeaponReady
    Loop
  Deselect:
    HSPI A 1 A_Lower
    Loop
  Select:
    HSPF CBA 1 A_Raise
    Loop
  Fire:
    HSPI ABCBA 3
    TNT1 A 0 A_JumpIfInventory("Mana",20,"ConfirmFire")
    TNT1 A 0 A_Print("Needs 20 mana")
	Goto Ready
  ConfirmFire:
    HSPF ABC 3
	TNT1 A 0 A_GiveInventory("SPHealEffect")
	TNT1 A 0 A_GiveInventory("StatProgressINT")
	TNT1 A 0 A_TakeInventory("Mana",20)
	TNT1 A 0 A_Playsound("misc/p_pkup", CHAN_WEAPON)
	HSPF CBA 3
	Goto Ready
  Spawn:
    SOUL ABCDCB 6 Bright
    Loop
	
  }
}

ACTOR SPHeal : SPBaseSpell
{
  tag "Heal"
  +INVENTORY.UNDROPPABLE
  States
  {
  Ready:
    HSPI AABCCBAA 3 A_WeaponReady
    Loop
  Deselect:
    HSPI A 1 A_Lower
    Loop
  Select:
    HSPF CBA 1 A_Raise
    Loop
  Fire:
    HSPI ABCBA 3
    TNT1 A 0 A_JumpIfInventory("Mana",20,"ConfirmFire")
    TNT1 A 0 A_Print("Needs 20 mana")
	Goto Ready
  ConfirmFire:
    TNT1 A 0 A_JumpIfInventory("Statint",8,"ConfirmFire2")
	HSPF ABC 3
	TNT1 A 0 A_GiveInventory("SPHealEffect")
	TNT1 A 0 A_GiveInventory("StatProgressINT",Random(10,20))
	TNT1 A 0 A_TakeInventory("Mana",20)
	TNT1 A 0 A_Playsound("misc/p_pkup", CHAN_WEAPON)
	HSPF CBA 3
	Goto Ready
  ConfirmFire2:
	HSPF ABC 3
	TNT1 A 0 A_GiveInventory("SPHealEffect2")
	TNT1 A 0 A_GiveInventory("StatProgressINT",Random(10,20))
	TNT1 A 0 A_TakeInventory("Mana",20)
	TNT1 A 0 A_Playsound("misc/p_pkup", CHAN_WEAPON)
	HSPF CBA 3
	Goto Ready
  
  Spawn:
    SOUL ABCDCB 6 Bright
    Loop
	
  }
}

ACTOR SPHealEffect : Health
{
  Inventory.Amount 10
  States
  {
  Spawn:
    MEDI A -1
    Stop
  }
}

ACTOR SPHealEffect2 : Health
{
  Inventory.Amount 20
  States
  {
  Spawn:
    MEDI A -1
    Stop
  }
}

ACTOR SPClipSynth : SPBaseSpell
{
  tag "Bullet Synth"
  States
  {
  Ready:
    SPAS AABCCBAA 3 A_WeaponReady
    Loop
  Deselect:
    SPAS A 1 A_Lower
    Loop
  Select:
    SPAS CBA 1 A_Raise
    Loop
  Fire:
    SPAS ABCBA 3
    TNT1 A 0 A_JumpIfInventory("Mana",10,"ConfirmFire")
    TNT1 A 0 A_Print("Needs 10 mana")
	Goto Ready
  ConfirmFire:
    SPAA ABC 3
	TNT1 A 0 A_SpawnItemEx("NewClip",45,0,30,5)
	TNT1 A 0 A_TakeInventory("Mana",10)
	TNT1 A 0 A_GiveInventory("StatProgressINT",Random(5,10))
	TNT1 A 0 A_Playsound("misc/p_pkup", CHAN_WEAPON)
	SPAA CBA 3
	Goto Ready
  Spawn:
    SPAS D -1 Bright
    Stop
	
  }
}

ACTOR SPBlur : SPBaseSpell
{
  tag "Invisibility"
  +WEAPON.NOALERT
  +WEAPON.NO_AUTO_SWITCH
  +WEAPON.CHEATNOTWEAPON
  Weapon.SelectionOrder 9999
  Weapon.BobSpeed 2.0
  Weapon.BobRangeX 0.90
  Weapon.BobRangeX 0.75
  Weapon.BobStyle Smooth
  Inventory.PickupSound "misc/p_pkup"
  States
  {
  Ready:
    SPIV AABCCBAA 3 A_WeaponReady
    Loop
  Deselect:
    SPIV A 1 A_Lower
    Loop
  Select:
    SPIV FED 1 A_Raise
    Loop
  Fire:
    TNT1 A 0 A_JumpIfInventory("Mana",30,"ConfirmFire")
    TNT1 A 0 A_Print("Needs 30 mana")
	Goto Ready
  ConfirmFire:
    SPIV DEF 3
	TNT1 A 0 A_GiveInventory("SPBlurEffect")
	TNT1 A 0 A_GiveInventory("StatProgressINT",Random(15,30))
	TNT1 A 0 A_TakeInventory("Mana",30)
	TNT1 A 0 A_Playsound("misc/p_pkup", CHAN_WEAPON)
	SPIV FED 3
	Goto Ready
  Spawn:
    PINS ABCDCB 6 Bright
    Loop
	
  }
}

ACTOR SPBlurEffect : PowerupGiver
{
  +INVENTORY.AUTOACTIVATE
  +INVENTORY.ALWAYSPICKUP
  +INVENTORY.ADDITIVETIME
  Inventory.MaxAmount 0
  Powerup.Type "Invisibility"
  Powerup.Duration -15
  RenderStyle Translucent
  Inventory.PickupMessage "$GOTINVIS" // "Partial Invisibility"

}

ACTOR SPFireBall : SPBaseSpell
{
  tag "Imp Fire"
  +WEAPON.NOALERT
  +WEAPON.NO_AUTO_SWITCH
  +WEAPON.CHEATNOTWEAPON
  +Weapon.Ammo_Optional
  Weapon.SelectionOrder 9999
  Weapon.BobSpeed 2.0
  Weapon.BobRangeX 0.90
  Weapon.BobRangeX 0.75
  Weapon.BobStyle Smooth
  Weapon.AmmoUse 5
  Weapon.AmmoType "Mana"
  Inventory.PickupSound "misc/p_pkup"
  States
  {
  Ready:
    SPFB AB 6 A_WeaponReady
    Loop
  Deselect:
    SPFB A 1 A_Lower
    Loop
  Select:
    SPFB ABABAB 1 A_Raise
    Loop
  Fire:
    TNT1 A 0 A_JumpIfInventory("Mana",5,"ConfirmFire")
    TNT1 A 0 A_Print("Needs 5 mana")
	Goto Ready
  ConfirmFire:
    HTSE AB 4
	TNT1 A 0 A_FireCustomMissile ("SPImpFireEffect",0,1,0,0,0)
	TNT1 A 0 A_GiveInventory("StatProgressINT",Random(2,5))
	TNT1 A 0 A_Playsound("imp/attack", CHAN_WEAPON)
	HTSE CD 4
	Goto Ready
  Spawn:
    FBPU AB 6 Bright
    Loop
	
  }
}

ACTOR SPImpFireEffect
{
  Radius 6
  Height 8
  Speed 50
  Damage (ACS_NamedExecuteWithResult("MAGJDAMAGESCR",10,1,0,0) * Random( 1, 4))
  Projectile
  +RANDOMIZE
  RenderStyle Add
  Alpha 1
  SeeSound "imp/attack"
  DeathSound "imp/shotx"
  States
  {
  Spawn:
    BAL1 AB 4 Bright
    Loop
  Death:
    BAL1 CDE 6 Bright
    Stop
  }
}