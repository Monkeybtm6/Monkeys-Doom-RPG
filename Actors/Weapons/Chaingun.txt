ACTOR AsaultRifleWS : Chaingun replaces Chaingun
{
   Weapon.SelectionOrder 700
   Weapon.SlotNumber 4
   Weapon.AmmoUse 1
   Weapon.AmmoGive2 20
   Weapon.AmmoType "ARMag"
   Weapon.AmmoType2 "Clip"
   Inventory.PickupMessage "You got the Assault Rifle" // "You got the chaingun"
   +Weapon.Ammo_Optional
   Obituary "$OB_MPCHAINGUN" // "%o was mowed down by %k's chaingun."
   Tag "$TAG_CHAINGUN"
   States
   {
   
   Ready:
     CHGG A 1 A_WeaponReady(wrf_allowreload)
     Loop
   
   Deselect:
     CHGG A 1 A_Lower
     Loop
   
   Select:
     CHGG A 1 A_Raise
     Loop
   
   Fire:
     CHGF A 0 A_JumpIfNoAmmo ("Reload")
	 CHGF A 0 A_PlaySound("weapons/chngun", CHAN_WEAPON)
	 CHGF A 0 Radius_Quake(1,2,0,1,0)
	 CHGF A 0 A_FireBullets(5.6, 0, 1, (ACS_NamedExecuteWithResult("DAMAGESCR",12,0,0)), "BulletPuff", FBF_USEAMMO|FBF_NORANDOM)
	 CHGF A 1 Bright A_Light1
	 CHGF B 2
	 CHGF C 1
     Goto Ready
   
   Reload:
    CHGG A 0 A_JumpIfInventory ("ARMag", 32, 2)
    CHGG A 0 A_JumpIfInventory("Clip", 1, "ReloadStep")
    CHGG A 0
    goto ready
   Reloadstep:
    CHGR SRQPO 2
	CHGR N 1 A_playSound("weapons/pistolclipin")
	CHGR MLKJIHG 2
    CHGR G 3
   ReloadLoop:
	TNT1 A 0 A_TakeInventory("Clip", 1)
    TNT1 A 0 A_GiveInventory("ARMag", 1)
    TNT1 A 0 A_JumpIfInventory("ARMag", 32, "ReloadDone")
    TNT1 A 0 A_JumpIfInventory("Clip", 1, "ReloadLoop")
    Goto ReloadDone
   ReloadDone:
	CHGR GHIJKLM 2
	CHGR N 2 A_playSound("weapons/pistolclipin")
	CHGR OP 2
	CGCK ABCDEF 2
	goto ready
   
   Spawn:
     MGUN A -1
     Stop
   }
}

actor ARMAG : ammo
{
 Inventory.MaxAmount 32
 +IGNORESKILL
}