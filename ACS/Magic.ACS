#library "Spells"
#include "zcommon.acs"
#Define SpellsList 4
str Magicspells[SpellsList] = 
{
  "SPHeal",
  "SPHeal",
  "SPClipSynth",
  "SPTest2"
};

/*Script "SpellHud" (Void)
{
 int i = CheckInventory("Selected spell");
 HudMessage(s: Magicspells[i]; 1, CR_Blue, -8, -69, 5, 1.0);
 Delay(5);
 Restart;
}*/


Script "SelectedSpell" (void)
{
  int i = CheckInventory("Selected spell");
  if (CheckInventory("Spellout") == 0 )
	{
	SetUserVariable(0,"User_Weapon",GetWeapon());
	SetWeapon(Magicspells[i]);
	GiveInventory("Spellout",1);
	}
	Else if (CheckInventory("Spellout") > 0 )
	{
	SetWeapon(GetUserVariable(0,"User_Weapon"));
	TakeInventory("Spellout",1);
	}
  
}

Script "SpellSelector" (Void)
{
  int i = SpellsList,
      e = CheckInventory("Selected spell");
  GiveInventory("Selected spell",1);
  if (CheckInventory("Selected spell") > i)
     {
	  TakeInventory("Selected spell",i);
	 }
until(CheckInventory(Magicspells[CheckInventory("Selected spell")]) == 1)
     {
	  GiveInventory("Selected spell",1);
	   if (CheckInventory("Selected spell") > i)
          {
	      TakeInventory("Selected spell",i);
	      }
	 }
  
  if (CheckInventory("Spellout") > 0 )
	{
	SetWeapon(Magicspells[CheckInventory("Selected spell")]);
	}
}
